{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Tarot Card Page Contract",
  "description": "API contract for tarot card detail pages",
  "type": "object",
  "properties": {
    "route": {
      "type": "string",
      "pattern": "^/\\[locale\\]/(kartlar|cards|kartice)/\\[slug\\]$",
      "examples": ["/[locale]/kartlar/[slug]", "/[locale]/cards/[slug]", "/[locale]/kartice/[slug]"]
    },
    "params": {
      "type": "object",
      "properties": {
        "locale": {
          "type": "string",
          "enum": ["tr", "en", "sr"],
          "description": "Language code for the page"
        },
        "slug": {
          "type": "string",
          "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$",
          "description": "URL-friendly card name (e.g., 'the-fool', 'joker', 'budala')",
          "examples": ["the-fool", "joker", "ace-of-cups"]
        }
      },
      "required": ["locale", "slug"]
    },
    "response": {
      "type": "object",
      "properties": {
        "card": {
          "$ref": "#/definitions/TarotCard"
        },
        "content": {
          "$ref": "#/definitions/CardContent"
        },
        "seo": {
          "$ref": "#/definitions/CardSEO"
        },
        "relatedCards": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/TarotCard"
          },
          "minItems": 0,
          "maxItems": 4
        }
      },
      "required": ["card", "content", "seo", "relatedCards"]
    },
    "errors": {
      "type": "object",
      "properties": {
        "404": {
          "type": "object",
          "properties": {
            "message": {
              "type": "string",
              "const": "Card not found"
            },
            "suggestedCards": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/TarotCard"
              },
              "maxItems": 6
            }
          }
        },
        "500": {
          "type": "object",
          "properties": {
            "message": {
              "type": "string",
              "const": "Internal server error"
            }
          }
        }
      }
    }
  },
  "required": ["route", "params", "response", "errors"],
  "definitions": {
    "TarotCard": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$"
        },
        "englishName": {
          "type": "string",
          "minLength": 1
        },
        "turkishName": {
          "type": "string",
          "minLength": 1
        },
        "serbianName": {
          "type": "string",
          "minLength": 1
        },
        "arcanaType": {
          "type": "string",
          "enum": ["major", "minor"]
        },
        "suit": {
          "type": "string",
          "enum": ["major", "cups", "swords", "wands", "pentacles"]
        },
        "number": {
          "type": ["number", "null"],
          "minimum": 0,
          "maximum": 21
        },
        "imageUrl": {
          "type": "string",
          "pattern": "\\.webp$"
        },
        "slugTR": {
          "type": "string",
          "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$"
        },
        "slugEN": {
          "type": "string",
          "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$"
        },
        "slugSR": {
          "type": "string",
          "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$"
        }
      },
      "required": [
        "id",
        "englishName",
        "turkishName",
        "serbianName",
        "arcanaType",
        "suit",
        "number",
        "imageUrl",
        "slugTR",
        "slugEN",
        "slugSR"
      ]
    },
    "CardContent": {
      "type": "object",
      "properties": {
        "cardId": {
          "type": "string"
        },
        "locale": {
          "type": "string",
          "enum": ["tr", "en", "sr"]
        },
        "title": {
          "type": "string",
          "minLength": 10,
          "maxLength": 100
        },
        "shortDescription": {
          "type": "string",
          "minLength": 50,
          "maxLength": 150
        },
        "uprightMeaning": {
          "type": "string",
          "minLength": 1000,
          "maxLength": 2000
        },
        "reversedMeaning": {
          "type": "string",
          "minLength": 800,
          "maxLength": 1500
        },
        "loveInterpretation": {
          "type": "string",
          "minLength": 250,
          "maxLength": 500
        },
        "careerInterpretation": {
          "type": "string",
          "minLength": 250,
          "maxLength": 500
        },
        "moneyInterpretation": {
          "type": "string",
          "minLength": 250,
          "maxLength": 500
        },
        "spiritualMessage": {
          "type": "string",
          "minLength": 200,
          "maxLength": 400
        },
        "story": {
          "type": "string",
          "minLength": 500,
          "maxLength": 1000
        },
        "keywords": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 5,
          "maxItems": 8
        },
        "readingTime": {
          "type": "number",
          "minimum": 1,
          "maximum": 15
        }
      },
      "required": [
        "cardId",
        "locale",
        "title",
        "shortDescription",
        "uprightMeaning",
        "reversedMeaning",
        "loveInterpretation",
        "careerInterpretation",
        "moneyInterpretation",
        "spiritualMessage",
        "story",
        "keywords",
        "readingTime"
      ]
    },
    "CardSEO": {
      "type": "object",
      "properties": {
        "cardId": {
          "type": "string"
        },
        "locale": {
          "type": "string",
          "enum": ["tr", "en", "sr"]
        },
        "metaTitle": {
          "type": "string",
          "minLength": 30,
          "maxLength": 60
        },
        "metaDescription": {
          "type": "string",
          "minLength": 120,
          "maxLength": 155
        },
        "canonicalUrl": {
          "type": "string",
          "format": "uri",
          "pattern": "^https://"
        },
        "ogImage": {
          "type": "string",
          "pattern": "^/"
        },
        "twitterImage": {
          "type": "string",
          "pattern": "^/"
        },
        "keywords": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 5,
          "maxItems": 10
        },
        "faq": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/FAQItem"
          },
          "minItems": 3,
          "maxItems": 6
        }
      },
      "required": [
        "cardId",
        "locale",
        "metaTitle",
        "metaDescription",
        "canonicalUrl",
        "ogImage",
        "twitterImage",
        "keywords",
        "faq"
      ]
    },
    "FAQItem": {
      "type": "object",
      "properties": {
        "question": {
          "type": "string",
          "minLength": 10,
          "maxLength": 100
        },
        "answer": {
          "type": "string",
          "minLength": 100,
          "maxLength": 1000
        }
      },
      "required": ["question", "answer"]
    }
  }
}
