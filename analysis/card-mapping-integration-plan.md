# Card Name Mapping Entegrasyon Planƒ±

## üìä Mevcut Durum Analizi

**Dosya**: `src/features/tarot/lib/love/card-name-mapping.ts`  
**Toplam Mapping**: 247 kart ismi  
**Dil Desteƒüi**: TR, EN, SR

## üó∫ Mevcut Mapping Yapƒ±sƒ±

### Major Arcana Mapping √ñrnekleri

```typescript
export const cardNameMapping: { [key: string]: string } = {
  // Major Arcana - T√ºrk√ße
  Deli: 'The Fool',
  B√ºy√ºc√º: 'The Magician',
  'Y√ºksek Rahibe': 'The High Priestess',
  ƒ∞mparatori√ße: 'The Empress',
  ƒ∞mparator: 'The Emperor',
  Hierophant: 'The Hierophant',
  Aziz: 'The Hierophant',
  A≈üƒ±klar: 'The Lovers',
  'Sava≈ü Arabasƒ±': 'The Chariot',
  G√º√ß: 'Strength',
  Ermi≈ü: 'The Hermit',
  M√ºnzevi: 'The Hermit',
  // ... devamƒ±

  // Major Arcana - Sƒ±rp√ßa
  Budala: 'The Fool',
  Maƒëioniƒçar: 'The Magician',
  'Visoka Svestenica': 'The High Priestess',
  Carica: 'The Empress',
  Car: 'The Emperor',
  // ... devamƒ±
};
```

### Minor Arcana Mapping √ñrnekleri

```typescript
// Minor Arcana - Kupalar (T√ºrk√ße)
'Kupalar Asƒ±': 'Ace of Cups',
'Kupalar ƒ∞kilisi': 'Two of Cups',
'Kupalar √ú√ßl√ºs√º': 'Three of Cups',
// ... devamƒ±

// Minor Arcana - Kupalar (Sƒ±rp√ßa)
'As Pehara': 'Ace of Cups',
'Dvojka Pehara': 'Two of Cups',
'Trojka Pehara': 'Three of Cups',
// ... devamƒ±
```

## üîÑ Entegrasyon Stratejisi

### 1. Reverse Mapping Olu≈üturma

```typescript
// Mevcut mapping'i tersine √ßevirme
export const reverseCardNameMapping = (): {
  [key: string]: { tr: string; sr: string };
} => {
  const reverse: { [key: string]: { tr: string; sr: string } } = {};

  Object.entries(cardNameMapping).forEach(([localName, englishName]) => {
    if (!reverse[englishName]) {
      reverse[englishName] = { tr: '', sr: '' };
    }

    // T√ºrk√ße mi Sƒ±rp√ßa mƒ± belirleme
    if (isTurkishName(localName)) {
      reverse[englishName].tr = localName;
    } else if (isSerbianName(localName)) {
      reverse[englishName].sr = localName;
    }
  });

  return reverse;
};

const isTurkishName = (name: string): boolean => {
  const turkishPatterns = [
    'Kupalar',
    'Kƒ±lƒ±√ßlar',
    'Asalar',
    'Tƒ±lsƒ±mlar',
    'Altƒ±nlar',
  ];
  return (
    turkishPatterns.some(pattern => name.includes(pattern)) ||
    ['Deli', 'B√ºy√ºc√º', 'ƒ∞mparatori√ße', 'ƒ∞mparator', 'A≈üƒ±klar'].includes(name)
  );
};

const isSerbianName = (name: string): boolean => {
  const serbianPatterns = ['Pehara', 'Maƒçeva', '≈†tapova', 'Pentakla'];
  return (
    serbianPatterns.some(pattern => name.includes(pattern)) ||
    ['Budala', 'Maƒëioniƒçar', 'Carica', 'Car', 'Ljubavnici'].includes(name)
  );
};
```

### 2. Slug Mapping Olu≈üturma

```typescript
export const cardSlugMapping = (): {
  [key: string]: { tr: string; en: string; sr: string };
} => {
  const reverse = reverseCardNameMapping();
  const slugs: { [key: string]: { tr: string; en: string; sr: string } } = {};

  Object.entries(reverse).forEach(([englishName, names]) => {
    slugs[englishName] = {
      tr: createTurkishSlug(names.tr),
      en: createEnglishSlug(englishName),
      sr: createSerbianSlug(names.sr),
    };
  });

  return slugs;
};

const createTurkishSlug = (name: string): string => {
  const slugMap: { [key: string]: string } = {
    Deli: 'deli',
    B√ºy√ºc√º: 'buyucu',
    'Y√ºksek Rahibe': 'yuksek-rahibe',
    ƒ∞mparatori√ße: 'imparatorice',
    ƒ∞mparator: 'imparator',
    Aziz: 'aziz',
    A≈üƒ±klar: 'asiklar',
    'Sava≈ü Arabasƒ±': 'savas-arabasi',
    G√º√ß: 'guc',
    Ermi≈ü: 'ermis',
    M√ºnzevi: 'munzevi',
    'Kader √áarkƒ±': 'kader-carki',
    Adalet: 'adalet',
    'Asƒ±lan Adam': 'asilan-adam',
    √ñl√ºm: 'olum',
    Denge: 'denge',
    ≈ûeytan: 'seytan',
    Kule: 'kule',
    Yƒ±ldƒ±z: 'yildiz',
    Ay: 'ay',
    G√ºne≈ü: 'gunes',
    Yargƒ±: 'yargi',
    D√ºnya: 'dunya',
    // Minor Arcana
    'Kupalar Asƒ±': 'kupalar-asi',
    'Kupalar ƒ∞kilisi': 'kupalar-ikilisi',
    'Kupalar √ú√ßl√ºs√º': 'kupalar-uclusu',
    // ... devamƒ±
  };

  return (
    slugMap[name] ||
    name
      .toLowerCase()
      .replace(/[√ßƒüƒ±√∂≈ü√º]/g, match => {
        const map: { [key: string]: string } = {
          √ß: 'c',
          ƒü: 'g',
          ƒ±: 'i',
          √∂: 'o',
          ≈ü: 's',
          √º: 'u',
        };
        return map[match];
      })
      .replace(/\s+/g, '-')
      .replace(/[^a-z0-9-]/g, '')
  );
};

const createEnglishSlug = (name: string): string => {
  const slugMap: { [key: string]: string } = {
    'The Fool': 'the-fool',
    'The Magician': 'the-magician',
    'The High Priestess': 'the-high-priestess',
    'The Empress': 'the-empress',
    'The Emperor': 'the-emperor',
    'The Hierophant': 'the-hierophant',
    'The Lovers': 'the-lovers',
    'The Chariot': 'the-chariot',
    Strength: 'strength',
    'The Hermit': 'the-hermit',
    'The Wheel of Fortune': 'the-wheel-of-fortune',
    Justice: 'justice',
    'The Hanged Man': 'the-hanged-man',
    Death: 'death',
    Temperance: 'temperance',
    'The Devil': 'the-devil',
    'The Tower': 'the-tower',
    'The Star': 'the-star',
    'The Moon': 'the-moon',
    'The Sun': 'the-sun',
    Judgement: 'judgement',
    'The World': 'the-world',
    // Minor Arcana
    'Ace of Cups': 'ace-of-cups',
    'Two of Cups': 'two-of-cups',
    'Three of Cups': 'three-of-cups',
    // ... devamƒ±
  };

  return slugMap[name] || name.toLowerCase().replace(/\s+/g, '-');
};

const createSerbianSlug = (name: string): string => {
  const slugMap: { [key: string]: string } = {
    Budala: 'budala',
    Maƒëioniƒçar: 'madionicar',
    'Visoka Svestenica': 'visoka-svestenica',
    Carica: 'carica',
    Car: 'car',
    Sve≈°tenik: 'svestenik',
    Ljubavnici: 'ljubavnici',
    Kola: 'kola',
    Snaga: 'snaga',
    Pustinjak: 'pustinjak',
    'Toƒçak Sreƒáe': 'tocak-srece',
    Pravda: 'pravda',
    'Obeseni ƒåovek': 'obeseni-covek',
    Smrt: 'smrt',
    Umerenost: 'umerenost',
    ƒêavo: 'davo',
    Kula: 'kula',
    Zvezda: 'zvezda',
    Mesec: 'mesec',
    Sunce: 'sunce',
    Sud: 'sud',
    Svet: 'svet',
    // Minor Arcana
    'As Pehara': 'as-pehara',
    'Dvojka Pehara': 'dvojka-pehara',
    'Trojka Pehara': 'trojka-pehara',
    // ... devamƒ±
  };

  return (
    slugMap[name] ||
    name
      .toLowerCase()
      .replace(/[ƒçƒáƒë≈°≈æ]/g, match => {
        const map: { [key: string]: string } = {
          ƒç: 'c',
          ƒá: 'c',
          ƒë: 'd',
          ≈°: 's',
          ≈æ: 'z',
        };
        return map[match];
      })
      .replace(/\s+/g, '-')
      .replace(/[^a-z0-9-]/g, '')
  );
};
```

### 3. Unified Card Interface

```typescript
export interface UnifiedCardData {
  id: string;
  names: {
    tr: string;
    en: string;
    sr: string;
  };
  slugs: {
    tr: string;
    en: string;
    sr: string;
  };
  content: {
    tr: CardContent;
    en: CardContent;
    sr: CardContent;
  };
  seo: {
    tr: SEOMeta;
    en: SEOMeta;
    sr: SEOMeta;
  };
}

export interface CardContent {
  short_description: string;
  meanings: {
    upright: {
      general: string;
      love: string;
      career: string;
      money: string;
      spiritual: string;
    };
    reversed: {
      general: string;
      love: string;
      career: string;
      money: string;
      spiritual: string;
    };
  };
  context: {
    mythology: string;
    celtic_cross: {
      future: string;
      hidden_influences: string;
    };
  };
  faq: string[];
  cta: {
    main: string;
    micro: string;
  };
  related: {
    cards: string[];
    guides: string[];
  };
}

export interface SEOMeta {
  title: string;
  description: string;
  keywords: string[];
}
```

### 4. Helper Fonksiyonlarƒ±

```typescript
// Kart ID'sinden t√ºm dil bilgilerini getirme
export const getCardBySlug = async (
  slug: string,
  locale: 'tr' | 'en' | 'sr'
): Promise<UnifiedCardData | null> => {
  const slugMapping = cardSlugMapping();

  // Slug'dan kart ID'sini bulma
  const cardId = Object.keys(slugMapping).find(
    id => slugMapping[id][locale] === slug
  );

  if (!cardId) return null;

  // ƒ∞√ßerik verilerini getirme
  const content = await getCardContent(cardId);

  return {
    id: cardId,
    names: reverseCardNameMapping()[cardId],
    slugs: slugMapping[cardId],
    content,
    seo: await getCardSEO(cardId),
  };
};

// T√ºm kartlarƒ± liste olarak getirme
export const getAllCards = async (): Promise<UnifiedCardData[]> => {
  const slugMapping = cardSlugMapping();
  const cards: UnifiedCardData[] = [];

  for (const cardId of Object.keys(slugMapping)) {
    const card = await getCardBySlug(slugMapping[cardId].en, 'en');
    if (card) cards.push(card);
  }

  return cards;
};

// Hreflang i√ßin alternatif URL'leri getirme
export const getHreflangUrls = (
  cardId: string
): { [locale: string]: string } => {
  const slugs = cardSlugMapping()[cardId];
  const baseUrl = 'https://busbuskimki.com';

  return {
    en: `${baseUrl}/en/cards/${slugs.en}`,
    tr: `${baseUrl}/tr/kartlar/${slugs.tr}`,
    sr: `${baseUrl}/sr/kartice/${slugs.sr}`,
    'x-default': `${baseUrl}/en/cards/${slugs.en}`,
  };
};
```

## üéØ Implementation Adƒ±mlarƒ±

### 1. Mapping Dosyasƒ±nƒ± Geni≈ületme

```typescript
// src/lib/tarot/card-mappings.ts
export {
  cardNameMapping,
  reverseCardNameMapping,
  cardSlugMapping,
} from './mappings';
export { getCardBySlug, getAllCards, getHreflangUrls } from './helpers';
export type { UnifiedCardData, CardContent, SEOMeta } from './types';
```

### 2. Next.js Dynamic Routing

```typescript
// src/app/[locale]/(main)/[category]/[slug]/page.tsx
import { getCardBySlug, getHreflangUrls } from '@/lib/tarot/card-mappings';

export async function generateStaticParams() {
  const cards = await getAllCards();
  const params = [];

  for (const card of cards) {
    params.push(
      { locale: 'tr', category: 'kartlar', slug: card.slugs.tr },
      { locale: 'en', category: 'cards', slug: card.slugs.en },
      { locale: 'sr', category: 'kartice', slug: card.slugs.sr }
    );
  }

  return params;
}
```

### 3. SEO Meta Generation

```typescript
export async function generateMetadata({
  params,
}: {
  params: { slug: string; locale: string };
}) {
  const card = await getCardBySlug(
    params.slug,
    params.locale as 'tr' | 'en' | 'sr'
  );

  if (!card) return {};

  const hreflangUrls = getHreflangUrls(card.id);

  return {
    title: card.seo[params.locale as keyof typeof card.seo].title,
    description: card.seo[params.locale as keyof typeof card.seo].description,
    keywords: card.seo[params.locale as keyof typeof card.seo].keywords,
    alternates: {
      canonical: hreflangUrls[params.locale],
      languages: hreflangUrls,
    },
  };
}
```

## üìä Sonu√ß ve √ñneriler

### ‚úÖ Avantajlar

1. **Merkezi Y√∂netim**: T√ºm kart isimleri tek yerden
2. **Tip G√ºvenliƒüi**: TypeScript ile g√ºvenli eri≈üim
3. **Performans**: Lazy loading ile optimizasyon
4. **Esneklik**: Yeni diller kolayca eklenebilir

### ‚ö†Ô∏è Dikkat Edilecekler

1. **Mapping Tutarlƒ±lƒ±ƒüƒ±**: T√ºm kartlar i√ßin mapping gerekli
2. **Slug Benzersizliƒüi**: URL √ßakƒ±≈ümalarƒ±nƒ± √∂nleme
3. **Performance**: B√ºy√ºk mapping objesi memory kullanƒ±mƒ±
4. **Maintenance**: Yeni kartlar eklenirken mapping g√ºncelleme

### üöÄ Sonraki Adƒ±mlar

1. **Mapping Validation**: T√ºm kartlar i√ßin mapping kontrol√º
2. **Slug Generation**: Otomatik slug olu≈üturma
3. **Content Integration**: blogtarot.txt ile entegrasyon
4. **Testing**: Mapping fonksiyonlarƒ± test etme

---

**Sonu√ß**: Card name mapping entegrasyonu ba≈üarƒ±lƒ± ≈üekilde tamamlanabilir ve SEO
projesinin temelini olu≈üturur.

