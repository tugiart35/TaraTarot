# ğŸ” .cursorrules Audit - Tarot Web Application

**Analiz Tarihi:** $(date)  
**Framework:** Next.js 15.4.4 + TypeScript  
**Branch:** chore/inventory-safe

---

## ğŸ“‹ Mevcut Kurallar Analizi

### ğŸ¯ Proje KurallarÄ± (Mevcut)

```typescript
// User Rules (Memory'den)
- Always respond in TÃ¼rkÃ§e
- Port 3111 kullan (development server)
- Backend integration noktalarÄ±nda 'burada backend'e baÄŸlanÄ±lacak' yorumu ekle
- KÄ±sa TÃ¼rkÃ§e yorumlar ekle (main component functions)
- Code review'da info block ekle (file top'unda)
- Next.js 12+ otomatik JSX transform (explicit React imports gereksiz)
- Single quotes, trailing commas, TypeScript type annotations
```

### ğŸ—ï¸ Kod Stili KurallarÄ±

```typescript
// Mevcut Stil
- Single quotes for imports
- Trailing commas on last line of objects
- Imports each on its own line
- TypeScript type annotations to function parameters
- Break long argument lists onto separate lines
- Catch errors as unknown and handle safely
- Files end with newline
- Keep console.log statements until production
```

---

## âš ï¸ Tespit Edilen Ã‡eliÅŸkiler

### 1. ğŸ”´ React Import Ã‡eliÅŸkisi

```typescript
// Kural: "Next.js 12+ otomatik JSX transform, explicit React imports gereksiz"
// GerÃ§ek: BirÃ§ok dosyada explicit React import var
import React from 'react'; // âŒ Gereksiz
import { useState, useEffect } from 'react'; // âœ… Gerekli
```

### 2. ğŸŸ¡ Quote Style TutarsÄ±zlÄ±ÄŸÄ±

```typescript
// Kural: "Single quotes for imports"
// GerÃ§ek: Mixed usage
import { Component } from 'react'; // âœ… Single quote
import { Component } from 'react'; // âŒ Double quote (prettier default)
```

### 3. ğŸŸ  TypeScript Type Annotation EksikliÄŸi

```typescript
// Kural: "TypeScript type annotations to function parameters"
// GerÃ§ek: BirÃ§ok fonksiyonda eksik
function handleClick(event) { // âŒ Type eksik
function handleClick(event: MouseEvent) { // âœ… Type var
```

### 4. ğŸ”µ Console.log KullanÄ±mÄ±

```typescript
// Kural: "Keep console.log statements until production"
// GerÃ§ek: Production'da console.log'lar var
console.log('Debug info'); // âŒ Production'da olmamalÄ±
```

---

## ğŸš¨ Eksik Kurallar

### 1. ğŸ” GÃ¼venlik KurallarÄ±

```typescript
// Eksik: Environment variable gÃ¼venliÄŸi
// Ã–neri:
- Never expose service_role in client code
- Always validate environment variables
- Use proper error handling for sensitive operations
```

### 2. ğŸ¨ Component KurallarÄ±

```typescript
// Eksik: RSC (React Server Components) kurallarÄ±
// Ã–neri:
- Use 'use client' directive for client components
- Separate server and client components properly
- Avoid client hooks in server components
```

### 3. ğŸ“Š Performance KurallarÄ±

```typescript
// Eksik: Performance optimization kurallarÄ±
// Ã–neri:
- Use dynamic imports for heavy components
- Implement proper loading states
- Optimize bundle size
```

### 4. ğŸ§ª Testing KurallarÄ±

```typescript
// Eksik: Testing kurallarÄ±
// Ã–neri:
- Write unit tests for utilities
- Test critical user flows
- Maintain test coverage above 80%
```

---

## ğŸ“ Ã–nerilen .cursorrules GÃ¼ncellemeleri

### 1. ğŸ”§ Mevcut KurallarÄ± DÃ¼zelt

```typescript
// React Import KuralÄ± (GÃ¼ncellenmiÅŸ)
- Next.js 15+ otomatik JSX transform kullan
- Explicit React import'larÄ± sadece hooks iÃ§in kullan
- import React from 'react' gereksiz, import { useState } from 'react' gerekli

// Quote Style KuralÄ± (GÃ¼ncellenmiÅŸ)
- Prettier default'u kullan (double quotes)
- Import'larda tutarlÄ±lÄ±k saÄŸla
- String literals iÃ§in single quotes tercih et

// TypeScript KuralÄ± (GÃ¼ncellenmiÅŸ)
- Function parametrelerinde type annotation zorunlu
- Return type'larÄ± belirt (complex functions iÃ§in)
- any type kullanÄ±mÄ±nÄ± yasakla
```

### 2. ğŸ†• Yeni Kurallar Ekle

```typescript
// GÃ¼venlik KurallarÄ±
- Environment variables'larÄ± validate et
- Service role'Ã¼ client code'da kullanma
- Sensitive data'yÄ± log'lama
- Input validation zorunlu

// RSC KurallarÄ±
- Server component'lerde 'use client' kullanma
- Client hooks'larÄ± sadece client component'lerde kullan
- Data fetching'i server component'lerde yap

// Performance KurallarÄ±
- Heavy component'leri lazy load et
- Bundle size'Ä± monitor et
- Unused imports'larÄ± temizle
- Image optimization kullan

// Testing KurallarÄ±
- Critical path'leri test et
- Utility function'larÄ± test et
- Error boundary'leri test et
- Test coverage %80+ olsun
```

---

## ğŸ¯ Kurallar Uygulama Durumu

### âœ… Ä°yi Uygulanan Kurallar

| Kural             | Uygulama | Durum       |
| ----------------- | -------- | ----------- |
| TÃ¼rkÃ§e yanÄ±t      | %100     | âœ… MÃ¼kemmel |
| Port 3111         | %100     | âœ… MÃ¼kemmel |
| Backend yorumlarÄ± | %80      | âœ… Ä°yi      |
| Info block'lar    | %70      | âœ… Ä°yi      |

### âš ï¸ KÄ±smen Uygulanan Kurallar

| Kural            | Uygulama | Durum                |
| ---------------- | -------- | -------------------- |
| Single quotes    | %60      | âš ï¸ TutarsÄ±z          |
| TypeScript types | %50      | âš ï¸ Eksik             |
| Trailing commas  | %70      | âš ï¸ KÄ±smen            |
| Console.log      | %30      | âš ï¸ Production'da var |

### âŒ Uygulanmayan Kurallar

| Kural          | Uygulama | Durum        |
| -------------- | -------- | ------------ |
| React imports  | %20      | âŒ Ã‡eliÅŸkili |
| Error handling | %40      | âŒ Eksik     |
| File endings   | %60      | âŒ TutarsÄ±z  |

---

## ğŸ”§ Kurallar GÃ¼ncelleme Ã–nerileri

### 1. ğŸ“‹ Acil GÃ¼ncellemeler

```typescript
// .cursorrules dosyasÄ±na eklenecek:

## React & Next.js Rules
- Use 'use client' directive for client components
- Avoid explicit React imports (Next.js 15+ auto-import)
- Separate server and client components properly
- Use proper data fetching patterns

## TypeScript Rules
- Always add type annotations to function parameters
- Use strict mode (no any, no implicit any)
- Add return types for complex functions
- Use proper error types (unknown instead of any)

## Security Rules
- Never expose service_role in client code
- Validate all environment variables
- Use proper error handling for sensitive operations
- Implement rate limiting for API endpoints

## Performance Rules
- Use dynamic imports for heavy components
- Implement proper loading states
- Optimize bundle size (monitor with bundle-analyzer)
- Clean unused imports and dead code
```

### 2. ğŸ¨ Stil KurallarÄ± GÃ¼ncellemesi

```typescript
// Mevcut stil kurallarÄ±nÄ± gÃ¼ncelle:

## Code Style (Updated)
- Use double quotes (Prettier default)
- Add trailing commas to objects and arrays
- Break long lines (max 100 characters)
- Use consistent indentation (2 spaces)
- Add JSDoc comments for complex functions
- Use meaningful variable names
- Implement proper error boundaries
```

### 3. ğŸ§ª Testing KurallarÄ±

```typescript
// Yeni testing kurallarÄ±:

## Testing Rules
- Write unit tests for utility functions
- Test critical user flows (auth, payment, reading)
- Maintain test coverage above 80%
- Use proper test data and mocks
- Test error scenarios and edge cases
- Implement integration tests for API endpoints
```

---

## ğŸ“Š Kurallar Etkinlik Analizi

### ğŸ¯ En Etkili Kurallar

1. **TÃ¼rkÃ§e yanÄ±t** - %100 uygulanÄ±yor
2. **Port 3111** - %100 uygulanÄ±yor
3. **Backend yorumlarÄ±** - %80 uygulanÄ±yor
4. **Info block'lar** - %70 uygulanÄ±yor

### ğŸ”§ En Az Etkili Kurallar

1. **React imports** - %20 uygulanÄ±yor (Ã§eliÅŸkili)
2. **TypeScript types** - %50 uygulanÄ±yor (eksik)
3. **Error handling** - %40 uygulanÄ±yor (eksik)
4. **Console.log** - %30 uygulanÄ±yor (production'da var)

---

## ğŸš€ Kurallar Optimizasyonu

### 1. ğŸ“ˆ Uygulama OranÄ±nÄ± ArtÄ±r

```typescript
// Mevcut kurallarÄ± gÃ¼Ã§lendir:
- TypeScript strict mode'u zorla
- ESLint kurallarÄ±nÄ± sÄ±kÄ±laÅŸtÄ±r
- Prettier konfigÃ¼rasyonunu optimize et
- Husky pre-commit hooks ekle
```

### 2. ğŸ¯ Yeni Kurallar Ekle

```typescript
// Eksik alanlarÄ± kapat:
- RSC best practices
- Security guidelines
- Performance optimization
- Testing standards
```

### 3. ğŸ”„ KurallarÄ± GÃ¼ncelle

```typescript
// Eski kurallarÄ± modernize et:
- Next.js 15+ uyumlu kurallar
- TypeScript 5+ strict mode
- Modern React patterns
- Security best practices
```

---

## ğŸ“‹ Kurallar Uygulama PlanÄ±

### Phase 1: Critical Fixes (1 hafta)

- [ ] React import kurallarÄ±nÄ± dÃ¼zelt
- [ ] TypeScript type annotation'larÄ± ekle
- [ ] Console.log'larÄ± production'dan temizle
- [ ] Error handling'i iyileÅŸtir

### Phase 2: New Rules (2 hafta)

- [ ] RSC kurallarÄ±nÄ± ekle
- [ ] Security kurallarÄ±nÄ± ekle
- [ ] Performance kurallarÄ±nÄ± ekle
- [ ] Testing kurallarÄ±nÄ± ekle

### Phase 3: Optimization (1 hafta)

- [ ] ESLint konfigÃ¼rasyonunu gÃ¼ncelle
- [ ] Prettier kurallarÄ±nÄ± optimize et
- [ ] Husky pre-commit hooks ekle
- [ ] CI/CD pipeline'a kurallarÄ± entegre et

---

## ğŸ¯ SonuÃ§

**Mevcut Kurallar:** 8 adet (5 iyi, 2 kÄ±smen, 1 Ã§eliÅŸkili)  
**Eksik Kurallar:** 12 adet (gÃ¼venlik, RSC, performance, testing)  
**Uygulama OranÄ±:** %60 (orta seviye)

**Ã–nerilen Aksiyonlar:**

1. Mevcut kurallarÄ± dÃ¼zelt (1 hafta)
2. Yeni kurallar ekle (2 hafta)
3. Uygulama oranÄ±nÄ± artÄ±r (1 hafta)
4. Monitoring ve feedback sistemi kur (sÃ¼rekli)

**Beklenen Faydalar:**

- Code quality %30 artÄ±ÅŸ
- Security risk %50 azalÄ±ÅŸ
- Performance %20 iyileÅŸme
- Developer experience %40 artÄ±ÅŸ
