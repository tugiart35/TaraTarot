---
alwaysApply: true
---

# ğŸ”„ Import GÃ¼ncelleme Codemod - ModÃ¼l Konsolidasyonu

**Tarih:** 2025-01-27  
**AmaÃ§:** Import path'lerini otomatik olarak yeni modÃ¼l yapÄ±sÄ±na gÃ¼ncelleme  
**Durum:** Planlama TamamlandÄ± âœ…

---

## ğŸ¯ Codemod Stratejisi

### 1. AÅŸamalÄ± GÃ¼ncelleme
- **AÅŸama 1:** Admin modÃ¼lÃ¼ import'larÄ±
- **AÅŸama 2:** Auth modÃ¼lÃ¼ import'larÄ±  
- **AÅŸama 3:** Shared modÃ¼lÃ¼ import'larÄ±
- **AÅŸama 4:** Tarot modÃ¼lÃ¼ import'larÄ±

### 2. GÃ¼venli GÃ¼ncelleme
- Her aÅŸamada test edilir
- Rollback planÄ± hazÄ±r
- Incremental deployment

---

## ğŸ“‹ Import GÃ¼ncelleme HaritasÄ±

### Admin ModÃ¼lÃ¼ Import'larÄ±

#### Eski â†’ Yeni Path Mapping
```typescript
// Service imports
'@/lib/admin/admin-users' â†’ '@/modules/admin/services/admin-users'
'@/lib/admin/api-keys' â†’ '@/modules/admin/services/api-keys'
'@/lib/admin/email-system' â†’ '@/modules/admin/services/email-system'
'@/lib/admin/maintenance-system' â†’ '@/modules/admin/services/maintenance-system'
'@/lib/admin/shopier-system' â†’ '@/modules/admin/services/shopier-system'
'@/lib/admin/admin-performance' â†’ '@/modules/admin/services/admin-performance'
'@/lib/admin/admin-error-service' â†’ '@/modules/admin/services/admin-error-service'

// Component imports
'@/components/admin/UserDetailModal' â†’ '@/modules/admin/components/UserDetailModal'
'@/components/admin/CreditManagementModal' â†’ '@/modules/admin/components/CreditManagementModal'
'@/components/admin/AdminUserModals' â†’ '@/modules/admin/components/AdminUserModals'

// Hook imports
'@/hooks/admin/useAdminData' â†’ '@/modules/admin/hooks/useAdminData'
'@/hooks/admin/useAdminFilter' â†’ '@/modules/admin/hooks/useAdminFilter'

// Type imports
'@/types/admin.types' â†’ '@/modules/admin/types/admin.types'
```

#### Sed KomutlarÄ±
```bash
# Admin service imports
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/lib/admin/admin-users|@/modules/admin/services/admin-users|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/lib/admin/api-keys|@/modules/admin/services/api-keys|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/lib/admin/email-system|@/modules/admin/services/email-system|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/lib/admin/maintenance-system|@/modules/admin/services/maintenance-system|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/lib/admin/shopier-system|@/modules/admin/services/shopier-system|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/lib/admin/admin-performance|@/modules/admin/services/admin-performance|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/lib/admin/admin-error-service|@/modules/admin/services/admin-error-service|g'

# Admin component imports
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/components/admin/UserDetailModal|@/modules/admin/components/UserDetailModal|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/components/admin/CreditManagementModal|@/modules/admin/components/CreditManagementModal|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/components/admin/AdminUserModals|@/modules/admin/components/AdminUserModals|g'

# Admin hook imports
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/hooks/admin/useAdminData|@/modules/admin/hooks/useAdminData|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/hooks/admin/useAdminFilter|@/modules/admin/hooks/useAdminFilter|g'

# Admin type imports
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/types/admin.types|@/modules/admin/types/admin.types|g'
```

### Auth ModÃ¼lÃ¼ Import'larÄ±

#### Eski â†’ Yeni Path Mapping
```typescript
// Service imports
'@/lib/auth/auth-service' â†’ '@/modules/auth/services/auth-service'
'@/lib/auth/auth-validation' â†’ '@/modules/auth/services/auth-validation'
'@/lib/auth/auth-error-messages' â†’ '@/modules/auth/services/auth-error-messages'

// Component imports
'@/components/auth/AuthForm' â†’ '@/modules/auth/components/AuthForm'
'@/components/auth/AuthAccessibilityWrapper' â†’ '@/modules/auth/components/AuthAccessibilityWrapper'

// Hook imports
'@/hooks/auth/useAuth' â†’ '@/modules/auth/hooks/useAuth'
'@/hooks/auth/useRememberMe' â†’ '@/modules/auth/hooks/useRememberMe'

// Type imports
'@/types/auth.types' â†’ '@/modules/auth/types/auth.types'
```

#### Sed KomutlarÄ±
```bash
# Auth service imports
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/lib/auth/auth-service|@/modules/auth/services/auth-service|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/lib/auth/auth-validation|@/modules/auth/services/auth-validation|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/lib/auth/auth-error-messages|@/modules/auth/services/auth-error-messages|g'

# Auth component imports
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/components/auth/AuthForm|@/modules/auth/components/AuthForm|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/components/auth/AuthAccessibilityWrapper|@/modules/auth/components/AuthAccessibilityWrapper|g'

# Auth hook imports
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/hooks/auth/useAuth|@/modules/auth/hooks/useAuth|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/hooks/auth/useRememberMe|@/modules/auth/hooks/useRememberMe|g'

# Auth type imports
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/types/auth.types|@/modules/auth/types/auth.types|g'
```

### Shared ModÃ¼lÃ¼ Import'larÄ±

#### Eski â†’ Yeni Path Mapping
```typescript
// UI component imports
'@/features/shared/ui/BaseCardRenderer' â†’ '@/modules/shared/ui/BaseCardRenderer'
'@/features/shared/ui/BaseInterpretation' â†’ '@/modules/shared/ui/BaseInterpretation'
'@/features/shared/ui/Toast' â†’ '@/modules/shared/ui/Toast'
'@/features/shared/ui/LoadingSpinner' â†’ '@/modules/shared/ui/LoadingSpinner'

// Layout component imports
'@/features/shared/layout/BottomNavigation' â†’ '@/modules/shared/layout/BottomNavigation'
'@/features/shared/layout/Footer' â†’ '@/modules/shared/layout/Footer'
'@/features/shared/layout/HeadTags' â†’ '@/modules/shared/layout/HeadTags'

// Legacy component imports
'@/components/shared/ui/LoadingSpinner' â†’ '@/modules/shared/components/LoadingSpinner'
'@/components/shared/ui/ConfirmationDialog' â†’ '@/modules/shared/components/ConfirmationDialog'
```

#### Sed KomutlarÄ±
```bash
# Shared UI imports
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/features/shared/ui/BaseCardRenderer|@/modules/shared/ui/BaseCardRenderer|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/features/shared/ui/BaseInterpretation|@/modules/shared/ui/BaseInterpretation|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/features/shared/ui/Toast|@/modules/shared/ui/Toast|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/features/shared/ui/LoadingSpinner|@/modules/shared/ui/LoadingSpinner|g'

# Shared layout imports
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/features/shared/layout/BottomNavigation|@/modules/shared/layout/BottomNavigation|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/features/shared/layout/Footer|@/modules/shared/layout/Footer|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/features/shared/layout/HeadTags|@/modules/shared/layout/HeadTags|g'

# Legacy shared component imports
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/components/shared/ui/LoadingSpinner|@/modules/shared/components/LoadingSpinner|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/components/shared/ui/ConfirmationDialog|@/modules/shared/components/ConfirmationDialog|g'
```

### Tarot ModÃ¼lÃ¼ Import'larÄ±

#### Eski â†’ Yeni Path Mapping
```typescript
// Component imports
'@/features/tarot/components/Love-Spread/LoveTarot' â†’ '@/modules/tarot/components/Love-Spread/LoveTarot'
'@/features/tarot/components/Career-Spread/CareerTarot' â†’ '@/modules/tarot/components/Career-Spread/CareerTarot'
'@/features/tarot/components/Money-Spread/MoneyTarot' â†’ '@/modules/tarot/components/Money-Spread/MoneyTarot'

// Lib imports
'@/features/tarot/lib/a-tarot-helpers' â†’ '@/modules/tarot/lib/a-tarot-helpers'
'@/features/tarot/lib/full-tarot-deck' â†’ '@/modules/tarot/lib/full-tarot-deck'

// Constants imports
'@/lib/constants/tarotSpreads' â†’ '@/modules/tarot/constants/tarotSpreads'

// Type imports
'@/types/tarot' â†’ '@/modules/tarot/types/tarot'
```

#### Sed KomutlarÄ±
```bash
# Tarot component imports
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/features/tarot/components/Love-Spread/LoveTarot|@/modules/tarot/components/Love-Spread/LoveTarot|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/features/tarot/components/Career-Spread/CareerTarot|@/modules/tarot/components/Career-Spread/CareerTarot|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/features/tarot/components/Money-Spread/MoneyTarot|@/modules/tarot/components/Money-Spread/MoneyTarot|g'

# Tarot lib imports
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/features/tarot/lib/a-tarot-helpers|@/modules/tarot/lib/a-tarot-helpers|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/features/tarot/lib/full-tarot-deck|@/modules/tarot/lib/full-tarot-deck|g'

# Tarot constants imports
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/lib/constants/tarotSpreads|@/modules/tarot/constants/tarotSpreads|g'

# Tarot type imports
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/types/tarot|@/modules/tarot/types/tarot|g'
```

---

## ğŸ”§ GeliÅŸmiÅŸ Codemod AraÃ§larÄ±

### 1. TypeScript Codemod (jscodeshift)
```javascript
// codemods/admin-imports.js
const { execSync } = require('child_process');

module.exports = function transformer(fileInfo, api) {
  const j = api.jscodeshift;
  const source = j(fileInfo.source);
  
  // Admin service imports
  source.find(j.ImportDeclaration)
    .filter(path => path.value.source.value.startsWith('@/lib/admin/'))
    .replaceWith(path => {
      const oldPath = path.value.source.value;
      const newPath = oldPath.replace('@/lib/admin/', '@/modules/admin/services/');
      return j.importDeclaration(
        path.value.specifiers,
        j.literal(newPath)
      );
    });
  
  return source.toSource();
};
```

### 2. Regex-based Codemod
```bash
#!/bin/bash
# update-imports.sh

echo "ğŸ”„ Updating Admin imports..."
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/lib/admin/|@/modules/admin/services/|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/components/admin/|@/modules/admin/components/|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/hooks/admin/|@/modules/admin/hooks/|g'

echo "ğŸ”„ Updating Auth imports..."
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/lib/auth/|@/modules/auth/services/|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/components/auth/|@/modules/auth/components/|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/hooks/auth/|@/modules/auth/hooks/|g'

echo "ğŸ”„ Updating Shared imports..."
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/features/shared/|@/modules/shared/|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/components/shared/|@/modules/shared/components/|g'

echo "ğŸ”„ Updating Tarot imports..."
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/features/tarot/|@/modules/tarot/|g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i 's|@/lib/constants/tarotSpreads|@/modules/tarot/constants/tarotSpreads|g'

echo "âœ… Import updates completed!"
```

### 3. Node.js Codemod Script
```javascript
// scripts/update-imports.js
const fs = require('fs');
const path = require('path');
const glob = require('glob');

const importMappings = {
  // Admin mappings
  '@/lib/admin/admin-users': '@/modules/admin/services/admin-users',
  '@/lib/admin/api-keys': '@/modules/admin/services/api-keys',
  '@/components/admin/UserDetailModal': '@/modules/admin/components/UserDetailModal',
  '@/hooks/admin/useAdminData': '@/modules/admin/hooks/useAdminData',
  
  // Auth mappings
  '@/lib/auth/auth-service': '@/modules/auth/services/auth-service',
  '@/components/auth/AuthForm': '@/modules/auth/components/AuthForm',
  '@/hooks/auth/useAuth': '@/modules/auth/hooks/useAuth',
  
  // Shared mappings
  '@/features/shared/ui/Toast': '@/modules/shared/ui/Toast',
  '@/features/shared/layout/BottomNavigation': '@/modules/shared/layout/BottomNavigation',
  
  // Tarot mappings
  '@/features/tarot/components/Love-Spread/LoveTarot': '@/modules/tarot/components/Love-Spread/LoveTarot',
  '@/lib/constants/tarotSpreads': '@/modules/tarot/constants/tarotSpreads'
};

function updateImports(filePath) {
  let content = fs.readFileSync(filePath, 'utf8');
  let updated = false;
  
  Object.entries(importMappings).forEach(([oldPath, newPath]) => {
    const regex = new RegExp(oldPath.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
    if (content.includes(oldPath)) {
      content = content.replace(regex, newPath);
      updated = true;
    }
  });
  
  if (updated) {
    fs.writeFileSync(filePath, content);
    console.log(`âœ… Updated: ${filePath}`);
  }
}

// Find all TypeScript files
const files = glob.sync('src/**/*.{ts,tsx}');
files.forEach(updateImports);

console.log(`ğŸ‰ Updated ${files.length} files`);
```

---

## ğŸ§ª Codemod Test Stratejisi

### 1. Pre-Codemod Backup
```bash
# Create backup before codemod
git add -A
git commit -m "Pre-codemod backup"
git tag pre-codemod-backup
```

### 2. Incremental Testing
```bash
# Test after each module update
pnpm typecheck
pnpm lint
pnpm build
pnpm test
```

### 3. Rollback Plan
```bash
# Rollback if issues occur
git reset --hard pre-codemod-backup
```

### 4. Validation Script
```bash
#!/bin/bash
# validate-imports.sh

echo "ğŸ” Validating import updates..."

# Check for remaining old imports
echo "Checking for old admin imports..."
grep -r "@/lib/admin/" src/ && echo "âŒ Old admin imports found" || echo "âœ… No old admin imports"

echo "Checking for old auth imports..."
grep -r "@/lib/auth/" src/ && echo "âŒ Old auth imports found" || echo "âœ… No old auth imports"

echo "Checking for old shared imports..."
grep -r "@/features/shared/" src/ && echo "âŒ Old shared imports found" || echo "âœ… No old shared imports"

echo "Checking for old tarot imports..."
grep -r "@/features/tarot/" src/ && echo "âŒ Old tarot imports found" || echo "âœ… No old tarot imports"

# Check for new imports
echo "Checking for new module imports..."
grep -r "@/modules/" src/ | wc -l | xargs echo "New module imports:"

echo "âœ… Import validation completed!"
```

---

## ğŸ“Š Codemod Ä°statistikleri

| ModÃ¼l | Dosya SayÄ±sÄ± | Import SayÄ±sÄ± | Tahmini SÃ¼re |
|-------|--------------|---------------|---------------|
| Admin | 25+ | 50+ | 30 dakika |
| Auth | 40+ | 80+ | 45 dakika |
| Shared | 50+ | 100+ | 60 dakika |
| Tarot | 100+ | 200+ | 90 dakika |
| **Toplam** | **215+** | **430+** | **3.75 saat** |

---

## âš ï¸ Codemod Riskleri ve Ã–nlemler

### YÃ¼ksek Risk
- **Import path kÄ±rÄ±lmasÄ±** â†’ Backup + rollback planÄ±
- **TypeScript type errors** â†’ Type check after each module
- **Build failures** â†’ Incremental testing

### Orta Risk
- **Regex false positives** â†’ Manual review of changes
- **Import order changes** â†’ ESLint auto-fix
- **Unused imports** â†’ ESLint cleanup

### DÃ¼ÅŸÃ¼k Risk
- **File encoding issues** â†’ UTF-8 validation
- **Git history pollution** â†’ Clean commits

---

## ğŸš€ Codemod Uygulama SÄ±rasÄ±

### Hafta 1: Admin Codemod
- [ ] Admin import'larÄ± gÃ¼ncelle
- [ ] Test ve doÄŸrula
- [ ] Commit changes

### Hafta 2: Auth Codemod
- [ ] Auth import'larÄ± gÃ¼ncelle
- [ ] Test ve doÄŸrula
- [ ] Commit changes

### Hafta 3: Shared Codemod
- [ ] Shared import'larÄ± gÃ¼ncelle
- [ ] Test ve doÄŸrula
- [ ] Commit changes

### Hafta 4-5: Tarot Codemod
- [ ] Tarot import'larÄ± gÃ¼ncelle
- [ ] Test ve doÄŸrula
- [ ] Commit changes

### Hafta 6: Final Cleanup
- [ ] Unused imports temizle
- [ ] ESLint auto-fix
- [ ] Final validation

---

## ğŸ“ Codemod NotlarÄ±

- Her modÃ¼l iÃ§in ayrÄ± ayrÄ± codemod uygula
- Her codemod sonrasÄ± test et
- Backup al ve rollback planÄ± hazÄ±rla
- Manual review yap
- Clean commit'ler oluÅŸtur