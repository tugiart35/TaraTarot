# ğŸ”§ Cursor Rules Append Plan - Tarot Web Application

**Plan Tarihi:** $(date)  
**Framework:** Next.js 15.4.4 + TypeScript + Supabase  
**Branch:** refactor/structure-v1  
**Purpose:** Mevcut Cursor kurallarÄ±na gÃ¼venli eklemeler

---

## ğŸ¯ Append Strategy

Bu dosya, mevcut `.cursorrules` dosyasÄ±na gÃ¼venli eklemeler yapmak iÃ§in planlanmÄ±ÅŸtÄ±r. HiÃ§bir mevcut kural deÄŸiÅŸtirilmez, sadece yeni kurallar eklenir.

**YaklaÅŸÄ±m:**
- Mevcut kurallarÄ± koru
- Yeni kurallarÄ± kademeli olarak ekle
- Her faz sonunda lock dosyasÄ± oluÅŸtur
- Geri dÃ¶nÃ¼ÅŸ stratejisi hazÄ±r

---

## ğŸ“‹ DO NOT MODIFY Blocks

### 1. ğŸ”’ Locked Module Paths

#### 1.1 Auth Basic Module (FASE-2 sonrasÄ±)
```markdown
# DO NOT MODIFY - Auth Basic Module (Locked after FASE-2)
# Bu alan auth-basic.module.lock.mdc oluÅŸturulduktan sonra kilitlenir
# DeÄŸiÅŸiklik yapmak iÃ§in auth-basic.module.rules dosyasÄ±nÄ± gÃ¼ncelle

## Locked Paths:
- src/app/(auth)/**
- src/app/auth/callback/**
- src/app/(protected)/dashboard/page.tsx
- src/lib/supabase/**
- src/middleware.ts
- tests/auth/**
- prisma/** (profiles + RLS only)

## Locked Rules:
- RHF + Zod zorunluluÄŸu
- Service role client'te yasak
- RLS ON zorunluluÄŸu
- Same-origin redirect zorunluluÄŸu
```

#### 1.2 Tarot Module (FASE-3 sonrasÄ±)
```markdown
# DO NOT MODIFY - Tarot Module (Locked after FASE-3)
# Bu alan tarot.module.lock.mdc oluÅŸturulduktan sonra kilitlenir

## Locked Paths:
- src/features/tarot/**
- src/features/shared/ui/tarot/**
- src/lib/constants/tarotSpreads.ts
- src/types/tarot.ts

## Locked Rules:
- Card rendering patterns
- Spread calculation logic
- Interpretation system
- Reading storage format
```

#### 1.3 Numerology Module (FASE-4 sonrasÄ±)
```markdown
# DO NOT MODIFY - Numerology Module (Locked after FASE-4)
# Bu alan numerology.module.lock.mdc oluÅŸturulduktan sonra kilitlenir

## Locked Paths:
- src/features/numerology/**
- src/lib/numerology/**
- src/types/numerology.ts

## Locked Rules:
- Calculation algorithms
- Number meaning system
- Form validation patterns
- Result display format
```

---

## ğŸš€ Phase-Based Rule Additions

### FASE-0: Safety & Groundwork Rules

#### 0.1 Git Branching Rules
```markdown
# Git Branching Rules
- Her refactor fazÄ± iÃ§in ayrÄ± branch oluÅŸtur
- Faz tamamlandÄ±ÄŸÄ±nda tag oluÅŸtur (refactor-step-N)
- Geri dÃ¶nÃ¼ÅŸ iÃ§in rollback stratejisi hazÄ±r
- Merge Ã¶ncesi code review zorunlu
```

#### 0.2 Safety Check Rules
```markdown
# Safety Check Rules
- Her deÄŸiÅŸiklik Ã¶ncesi backup al
- Critical path'leri test et
- Rollback planÄ± hazÄ±r
- Monitoring aktif et
```

### FASE-1: Type System Alignment Rules

#### 1.1 TypeScript Strict Rules
```markdown
# TypeScript Strict Rules
- Strict mode zorunlu
- any kullanÄ±mÄ± yasak
- unknown kullanÄ±mÄ± tercih edilir
- Type guards zorunlu
- Generic types kullan
```

#### 1.2 Import/Export Rules
```markdown
# Import/Export Rules
- Barrel exports kullan
- Path aliases kullan
- Circular dependencies yasak
- Duplicate exports yasak
- Unused imports temizle
```

#### 1.3 Type Safety Rules
```markdown
# Type Safety Rules
- Runtime type checking zorunlu
- Error handling zorunlu
- Null/undefined checks zorunlu
- Type assertions minimal kullan
- Interface over type tercih et
```

### FASE-2: RSC & Routing Hygiene Rules

#### 2.1 RSC Rules
```markdown
# RSC (React Server Components) Rules
- Server components default
- Client components sadece gerektiÄŸinde
- 'use client' directive zorunlu
- Client hooks server'da yasak
- Data fetching server'da yap
```

#### 2.2 Routing Rules
```markdown
# App Router Rules
- Dynamic routes kullan
- Route groups organize et
- Middleware zorunlu
- Redirects gÃ¼venli
- Error boundaries ekle
```

#### 2.3 Component Rules
```markdown
# Component Rules
- Server/Client ayrÄ±mÄ± net
- Props validation zorunlu
- Error boundaries zorunlu
- Loading states ekle
- Accessibility zorunlu
```

### FASE-3: API & Data Layer Rules

#### 3.1 API Route Rules
```markdown
# API Route Rules
- RESTful patterns kullan
- Error handling zorunlu
- Rate limiting zorunlu
- Input validation zorunlu
- Response format standardize et
```

#### 3.2 Supabase Rules
```markdown
# Supabase Rules
- Client/Server ayrÄ±mÄ± net
- Service role client'te yasak
- RLS policies zorunlu
- Session management gÃ¼venli
- Error handling zorunlu
```

#### 3.3 Data Layer Rules
```markdown
# Data Layer Rules
- Repository pattern kullan
- Data validation zorunlu
- Caching stratejisi
- Error handling zorunlu
- Performance optimize et
```

### FASE-4: Form & i18n Rules

#### 4.1 Form Rules
```markdown
# Form Rules
- RHF + Zod zorunlu
- Schema separation zorunlu
- Validation zorunlu
- Error handling zorunlu
- Accessibility zorunlu
```

#### 4.2 i18n Rules
```markdown
# Internationalization Rules
- next-intl kullan
- Message keys organize et
- Locale routing zorunlu
- Fallback stratejisi
- Performance optimize et
```

#### 4.3 Validation Rules
```markdown
# Validation Rules
- Zod schemas zorunlu
- Client/Server validation
- Error messages i18n
- Real-time validation
- Security validation
```

### FASE-5: Code Quality Rules

#### 5.1 ESLint Rules
```markdown
# ESLint Rules
- Strict mode zorunlu
- Unused variables yasak
- Console.log production'da yasak
- Import order zorunlu
- Naming conventions zorunlu
```

#### 5.2 Prettier Rules
```markdown
# Prettier Rules
- Consistent formatting zorunlu
- Single quotes kullan
- Trailing commas zorunlu
- Line length limit
- Semicolons zorunlu
```

#### 5.3 Code Quality Rules
```markdown
# Code Quality Rules
- DRY principle zorunlu
- SOLID principles
- Clean code practices
- Documentation zorunlu
- Testing zorunlu
```

### FASE-6: Dead Weight Rules

#### 6.1 Cleanup Rules
```markdown
# Cleanup Rules
- Unused code yasak
- Dead imports yasak
- Duplicate code yasak
- Unused dependencies yasak
- Backup files yasak
```

#### 6.2 Bundle Rules
```markdown
# Bundle Rules
- Bundle size limit
- Tree shaking zorunlu
- Code splitting zorunlu
- Lazy loading zorunlu
- Performance optimize et
```

#### 6.3 Maintenance Rules
```markdown
# Maintenance Rules
- Regular cleanup zorunlu
- Dependency updates
- Security patches
- Performance monitoring
- Code review zorunlu
```

### FASE-7: Test Strategy Rules

#### 7.1 Testing Rules
```markdown
# Testing Rules
- Test coverage zorunlu
- Unit tests zorunlu
- Integration tests zorunlu
- E2E tests zorunlu
- Test quality zorunlu
```

#### 7.2 Test Quality Rules
```markdown
# Test Quality Rules
- Test isolation zorunlu
- Mock dependencies
- Test data management
- Test performance
- Test maintenance
```

#### 7.3 CI/CD Rules
```markdown
# CI/CD Rules
- Automated testing zorunlu
- Quality gates zorunlu
- Security scanning zorunlu
- Performance testing zorunlu
- Deployment automation
```

---

## ğŸ”’ Lock File Creation Strategy

### 1. Lock File Format
```markdown
# Module Lock File Format
# {module-name}.module.lock.mdc

## Lock Information
- Module: {module-name}
- Lock Date: {date}
- Locked By: {user}
- Lock Reason: {reason}

## Locked Paths
- {path1}
- {path2}
- {path3}

## Locked Rules
- {rule1}
- {rule2}
- {rule3}

## Unlock Conditions
- {condition1}
- {condition2}
- {condition3}
```

### 2. Lock File Creation Process
```markdown
# Lock File Creation Process
1. Faz tamamlandÄ±ÄŸÄ±nda lock dosyasÄ± oluÅŸtur
2. Locked paths ve rules'larÄ± belirle
3. Unlock conditions'larÄ± tanÄ±mla
4. Lock dosyasÄ±nÄ± commit et
5. Cursor rules'a lock referansÄ± ekle
```

### 3. Unlock Process
```markdown
# Unlock Process
1. Unlock conditions'larÄ± kontrol et
2. Code review yap
3. Tests Ã§alÄ±ÅŸtÄ±r
4. Lock dosyasÄ±nÄ± gÃ¼ncelle
5. Cursor rules'Ä± gÃ¼ncelle
```

---

## ğŸ“‹ Rule Addition Checklist

### Pre-Addition
- [ ] Mevcut kurallarÄ± analiz et
- [ ] Yeni kurallarÄ± planla
- [ ] Conflict'leri tespit et
- [ ] Test stratejisi hazÄ±rla
- [ ] Rollback planÄ± hazÄ±rla

### During Addition
- [ ] KurallarÄ± kademeli ekle
- [ ] Her ekleme sonrasÄ± test et
- [ ] Conflict'leri Ã§Ã¶z
- [ ] Documentation gÃ¼ncelle
- [ ] Team'e bildir

### Post-Addition
- [ ] TÃ¼m kurallar Ã§alÄ±ÅŸÄ±yor
- [ ] Tests geÃ§iyor
- [ ] Performance etkilenmiyor
- [ ] Team eÄŸitimi tamamlandÄ±
- [ ] Monitoring aktif

---

## ğŸš¨ Conflict Resolution

### 1. Rule Conflicts
```markdown
# Rule Conflict Resolution
1. Conflict'i tespit et
2. Priority belirle
3. Resolution stratejisi uygula
4. Documentation gÃ¼ncelle
5. Team'e bildir
```

### 2. Path Conflicts
```markdown
# Path Conflict Resolution
1. Path overlap'i tespit et
2. Scope'u netleÅŸtir
3. Hierarchy belirle
4. Rules'larÄ± organize et
5. Documentation gÃ¼ncelle
```

### 3. Implementation Conflicts
```markdown
# Implementation Conflict Resolution
1. Implementation conflict'i tespit et
2. Root cause analiz et
3. Solution belirle
4. Implementation planÄ± hazÄ±rla
5. Rollback planÄ± hazÄ±rla
```

---

## ğŸ“Š Rule Monitoring

### 1. Rule Compliance
```markdown
# Rule Compliance Monitoring
- Automated rule checking
- Manual rule review
- Compliance reporting
- Violation tracking
- Improvement suggestions
```

### 2. Rule Effectiveness
```markdown
# Rule Effectiveness Monitoring
- Rule usage tracking
- Impact measurement
- Performance monitoring
- Quality improvement
- Rule optimization
```

### 3. Rule Maintenance
```markdown
# Rule Maintenance
- Regular rule review
- Rule updates
- Rule deprecation
- Rule documentation
- Rule training
```

---

## ğŸ”„ Rollback Strategy

### 1. Rule Rollback
```markdown
# Rule Rollback Process
1. Rollback trigger'Ä± tespit et
2. Rollback planÄ± uygula
3. Affected code'u restore et
4. Tests Ã§alÄ±ÅŸtÄ±r
5. Documentation gÃ¼ncelle
```

### 2. Lock Rollback
```markdown
# Lock Rollback Process
1. Lock dosyasÄ±nÄ± kaldÄ±r
2. Cursor rules'dan lock referansÄ±nÄ± kaldÄ±r
3. Affected paths'leri unlock et
4. Tests Ã§alÄ±ÅŸtÄ±r
5. Documentation gÃ¼ncelle
```

### 3. Emergency Rollback
```markdown
# Emergency Rollback Process
1. Emergency trigger'Ä± tespit et
2. Immediate rollback uygula
3. Critical issues'larÄ± Ã§Ã¶z
4. Full system restore
5. Post-mortem analiz
```

---

## ğŸ“ Support & Escalation

### 1. Rule Issues
- **Email:** rules@tarot-app.com
- **Slack:** #cursor-rules
- **Phone:** +90 555 123 4567

### 2. Lock Issues
- **Email:** locks@tarot-app.com
- **Slack:** #module-locks
- **Phone:** +90 555 123 4568

### 3. Conflict Issues
- **Email:** conflicts@tarot-app.com
- **Slack:** #rule-conflicts
- **Phone:** +90 555 123 4569

---

## ğŸ¯ Success Criteria

### 1. Rule Addition Success
- [ ] TÃ¼m kurallar baÅŸarÄ±yla eklendi
- [ ] Conflict'ler Ã§Ã¶zÃ¼ldÃ¼
- [ ] Tests geÃ§iyor
- [ ] Performance etkilenmiyor
- [ ] Team eÄŸitimi tamamlandÄ±

### 2. Lock Success
- [ ] Lock dosyalarÄ± oluÅŸturuldu
- [ ] Locked paths korunuyor
- [ ] Unlock process Ã§alÄ±ÅŸÄ±yor
- [ ] Documentation gÃ¼ncel
- [ ] Monitoring aktif

### 3. Overall Success
- [ ] Refactor planÄ± baÅŸarÄ±lÄ±
- [ ] Code quality iyileÅŸti
- [ ] Performance optimize edildi
- [ ] Security gÃ¼Ã§lendirildi
- [ ] Team productivity arttÄ±

---

**Bu append planÄ±, mevcut Cursor kurallarÄ±na gÃ¼venli eklemeler yapmak iÃ§in tasarlanmÄ±ÅŸtÄ±r. HiÃ§bir mevcut kural deÄŸiÅŸtirilmez, sadece yeni kurallar eklenir.**
