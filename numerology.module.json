{
  "id": "numerology-module",
  "version": "1.0.0",
  "title": "Numerology Module (Life Path, Expression, Soul Urge, Daily)",
  "persona": "Senior Next.js + TypeScript engineer in Mystik Tarot repo. Follow existing conventions, security, i18n, and UI patterns.",
  "goals": [
    "Add a mobile-first Numerology experience with calculators (Life Path, Expression, Soul Urge) and a Daily Number.",
    "Reuse repo patterns: features/, lib/, messages/, app/ structure; keep components minimal and accessible.",
    "SSR-friendly pages with client forms (RHF+Zod); localized UI with next-intl.",
    "No external APIs; pure Pythagorean math with master numbers 11/22/33."
  ],
  "constraints": {
    "language": "TypeScript (strict)",
    "framework": "Next.js 15 App Router, React 18",
    "ui": ["TailwindCSS", "lucide-react (icons)"]
    "forms": ["React Hook Form", "Zod"],
    "state": ["No heavy global state"],
    "data": "Local numerology math only (Pythagorean A1Z26)",
    "i18n": "next-intl (tr default; en, sr)",
    "a11y_perf": [
      "WCAG AA colors, focus-visible, semantic HTML",
      "Use next/image where relevant, lazy load and dynamic imports when helpful",
      "Prefer RSC; client components only for interactive forms"
    ],
    "security_policies": [
      "No secrets in repo; use NEXT_PUBLIC_* only for public values",
      "No service_role or private keys on client",
      "Respect existing middleware routing and CSP"
    ],
    "authoring": [
      "Keep code idiomatic with existing project style",
      "Explain new deps in comments when added",
      "Use npm scripts (repo uses npm)"
    ]
  },
  "allowedPaths": [
    "src/app/[locale]/(main)/numeroloji/",
    "src/features/numerology/",
    "src/lib/numerology/",
    "messages/",
    "tests/numerology/"
  ],
  "routes": [
    { "path": "/[locale]/numeroloji", "component": "Landing" },
    { "path": "/[locale]/numeroloji/[type]", "component": "Result" }
  ],
  "calculators": [
    {
      "type": "life-path",
      "input": ["birthDate: YYYY-MM-DD"],
      "method": "Sum digits of YYYYMMDD, reduce to single digit with Pythagorean reduction; keep master numbers 11, 22, 33"
    },
    {
      "type": "expression",
      "input": ["fullName"],
      "method": "Sum A1Z26 values of all letters of the normalized name, reduce; keep master numbers"
    },
    {
      "type": "soul-urge",
      "input": ["fullName"],
      "method": "Sum A1Z26 values of vowels (A,E,I,O,U; Y optional by rule), reduce; keep master numbers"
    },
    {
      "type": "daily-number",
      "input": ["date (defaults to today)"],
      "method": "Sum digits of current date (YYYYMMDD), reduce; keep master numbers"
    }
  ],
  "architecture": {
    "pages": [
      "src/app/[locale]/(main)/numeroloji/page.tsx",
      "src/app/[locale]/(main)/numeroloji/[type]/page.tsx"
    ],
    "feature": "src/features/numerology/",
    "lib": [
      "src/lib/numerology/types.ts",
      "src/lib/numerology/normalize.ts",
      "src/lib/numerology/calculators.ts"
    ],
    "messages": ["messages/tr.json", "messages/en.json", "messages/sr.json"]
  },
  "filesToCreate": [
    { "path": "src/lib/numerology/types.ts", "status": "new", "description": "Shared types for numerology module" },
    { "path": "src/lib/numerology/normalize.ts", "status": "new", "description": "Normalization helpers and A1Z26 mapping" },
    { "path": "src/lib/numerology/calculators.ts", "status": "new", "description": "Pythagorean calculators (life path, expression, soul urge, daily)" },
    { "path": "src/features/numerology/components/NumerologyForm.tsx", "status": "new", "description": "Client form (RHF + Zod) with tabs for calculators" },
    { "path": "src/features/numerology/components/NumerologyResult.tsx", "status": "new", "description": "Result card component to show number, breakdown, localized text" },
    { "path": "src/app/[locale]/(main)/numeroloji/page.tsx", "status": "new", "description": "Landing page (RSC) embedding NumerologyForm" },
    { "path": "src/app/[locale]/(main)/numeroloji/[type]/page.tsx", "status": "new", "description": "SSR/RSC-safe result page reading query and hydrating client view" }
  ],
  "i18nKeys": {
    "append": {
      "messages/tr.json": {
        "numerology": {
          "title": "Numeroloji",
          "subtitle": "İsim ve doğum tarihin ile sayının rehberliğini keşfet.",
          "calculators": {
            "lifePath": "Yaşam Yolu",
            "expression": "İfade",
            "soulUrge": "Ruh Arzusu",
            "daily": "Günün Sayısı"
          },
          "form": {
            "name": "Ad Soyad",
            "birth": "Doğum Tarihi (YYYY-AA-GG)",
            "calculate": "Hesapla",
            "invalidDate": "Lütfen geçerli bir tarih girin.",
            "required": "Bu alan zorunludur."
          },
          "result": {
            "title": "{type} sonucu",
            "cardTitle": "{type} numaran"
          }
        }
      },
      "messages/en.json": {
        "numerology": {
          "title": "Numerology",
          "subtitle": "Discover your number's guidance with your name and birth date.",
          "calculators": {
            "lifePath": "Life Path",
            "expression": "Expression",
            "soulUrge": "Soul Urge",
            "daily": "Daily Number"
          },
          "form": {
            "name": "Full Name",
            "birth": "Birth Date (YYYY-MM-DD)",
            "calculate": "Calculate",
            "invalidDate": "Please enter a valid date.",
            "required": "This field is required."
          },
          "result": {
            "title": "{type} result",
            "cardTitle": "Your {type} number"
          }
        }
      },
      "messages/sr.json": {
        "numerology": {
          "title": "Numerologija",
          "subtitle": "Otkrij vođstvo svog broja uz ime i datum rođenja.",
          "calculators": {
            "lifePath": "Životni Put",
            "expression": "Ekspresija",
            "soulUrge": "Duševna Želja",
            "daily": "Dnevni Broj"
          },
          "form": {
            "name": "Ime i Prezime",
            "birth": "Datum Rođenja (YYYY-MM-DD)",
            "calculate": "Izračunaj",
            "invalidDate": "Unesite važeći datum.",
            "required": "Obavezno polje."
          },
          "result": {
            "title": "{type} rezultat",
            "cardTitle": "Tvoj {type} broj"
          }
        }
      }
    }
  },
  "validation": {
    "forms": "React Hook Form + Zod",
    "rules": [
      "Name: letters and spaces only after normalization",
      "Birth date: strict ISO YYYY-MM-DD, valid calendar date",
      "Type param must be one of life-path|expression|soul-urge|daily-number"
    ]
  },
  "acceptanceCriteria": [
    "(/[locale]/numeroloji) renders landing with 3 calculators and a Daily Number quick tool.",
    "Submitting forms shows validated, localized results without full reload.",
    "Math uses Pythagorean A1Z26 with master numbers 11/22/33.",
    "Deep links /[locale]/numeroloji/[type]?name=…&birth=YYYY-MM-DD reproduce results (SSR safe).",
    "i18n keys exist and language switch works.",
    "Lighthouse mobile performance ≥ 90 and a11y ≥ 90 on numerology pages.",
    "No ESLint/TS errors; npm build passes."
  ],
  "steps": [
    "Create lib helpers (types, normalize, calculators).",
    "Create NumerologyForm (client) with RHF + Zod; submit pushes to /numeroloji/[type] with query params.",
    "Create landing (RSC) and result (RSC) pages; read query on server and hydrate client view.",
    "Append i18n keys to tr/en/sr without overwriting existing JSON.",
    "Style mobile-first with Tailwind; ensure a11y.",
    "(Optional) Add unit tests for calculators if test runner is configured."
  ],
  "commands": [
    "npm i react-hook-form zod @hookform/resolvers",
    "npm run build"
  ],
  "notes": [
    "Keep client components minimal (forms only).",
    "No external API calls; all math is deterministic and testable.",
    "Reuse shared UI if available (cards, sections)."
  ]
}
